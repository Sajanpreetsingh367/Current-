<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Discussion Club</title>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;}
.container{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;min-height:100vh;position:relative;text-align:center;}
input,button{padding:10px;margin:5px;width:90%;max-width:400px;border-radius:8px;border:1px solid #ccc;}
button{background:#007AFF;color:white;font-weight:bold;cursor:pointer;border:none;}
.back-button{position:absolute;top:20px;left:20px;font-size:20px;cursor:pointer;}
.card{background:#fff;border-radius:10px;padding:10px;margin:10px;width:90%;max-width:400px;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
img{width:100%;border-radius:8px;}
.notice{background:#f0f0f0;padding:10px;border-radius:8px;margin-top:10px;font-size:14px;}
.disabled{opacity:0.5;cursor:not-allowed;}
</style>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

const firebaseConfig = {
  apiKey:"AIzaSyDwbIHTMWM_AQ-NlsdXGDzAfoC8Tf8lZiY",
  authDomain:"study-discussion-club.firebaseapp.com",
  projectId:"study-discussion-club",
  storageBucket:"study-discussion-club.appspot.com",
  messagingSenderId:"383378613377",
  appId:"1:383378613377:web:3b932c6b42076352811980"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);
window._firebase={auth,db,createUserWithEmailAndPassword,signInWithEmailAndPassword,doc,setDoc};
window._supabase=createClient("https://zkqegvyxmtwyznizuhjt.supabase.co","YOUR_SUPABASE_KEY_HERE");
</script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect}=React;
function App(){
  const [screen,setScreen]=useState("welcome");
  const [signup,setSignup]=useState({username:"",email:"",password:"",mobile:""});
  const [login,setLogin]=useState({email:"",password:""});
  const [exam,setExam]=useState(null);
  const [sub,setSub]=useState(false);
  const [sectionData,setSectionData]=useState([]);
  const [currentSection,setCurrentSection]=useState(null);

  const sections=[
    {name:"Current Affairs",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/current_affairs.json"},
    {name:"Practice Questions",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/practice_questions.json"},
    {name:"Mind Maps",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/mind_map.json"},
    {name:"Books Summary",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/books_summary.json"},
    {name:"Interview Practice",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/interview_practise.json"},
    {name:"Discussion",url:"https://raw.githubusercontent.com/Sajanpreetsingh367/Gill-Tarn-taran/main/sdc_news.json"}
  ];

  const handleSignup=async()=>{
    const {auth,db,createUserWithEmailAndPassword,doc,setDoc}=window._firebase;
    const u=await createUserWithEmailAndPassword(auth,signup.email,signup.password);
    await setDoc(doc(db,"users",u.user.uid),signup);
    alert("Signup successful ✅");setScreen("examlist");
  };

  const handleLogin=async()=>{
    const {auth,signInWithEmailAndPassword}=window._firebase;
    await signInWithEmailAndPassword(auth,login.email,login.password);
    alert("Login successful ✅");setScreen("examlist");
  };

  const loadSection=async(url)=>{const r=await fetch(url); const j=await r.json(); setSectionData(j.images||j);};

  if(screen==="welcome")return(
    <div className="container" style={{background:"#5a2d82",color:"white"}}>
      <div className="card" style={{borderRadius:"50%",width:100,height:100,display:"flex",alignItems:"center",justifyContent:"center"}}>Logo</div>
      <h2>Welcome to Study Discussion Club</h2>
      <p>Developer by Sajan</p>
      <button onClick={()=>setScreen("signup")}>Next</button>
    </div>
  );

  if(screen==="signup")return(
    <div className="container">
      <h2>Signup</h2>
      {["username","email","password","mobile"].map(k=>
        <input key={k} placeholder={k.toUpperCase()} type={k==="password"?"password":"text"} value={signup[k]} onChange={e=>setSignup({...signup,[k]:e.target.value})}/>
      )}
      <button onClick={handleSignup}>Signup</button>
      <button onClick={()=>setScreen("login")}>Already have an account?</button>
    </div>
  );

  if(screen==="login")return(
    <div className="container">
      <h2>Login</h2>
      <input placeholder="Email" value={login.email} onChange={e=>setLogin({...login,email:e.target.value})}/>
      <input placeholder="Password" type="password" value={login.password} onChange={e=>setLogin({...login,password:e.target.value})}/>
      <button onClick={handleLogin}>Login</button>
    </div>
  );

  if(screen==="examlist")return(
    <div className="container">
      <h2>Exam List</h2>
      {["UPSC","NEET","JUDICIARY","MATRIC CLASSES"].map(e=>
        <div key={e} className="card" style={{background:exam===e?"#ccc":"#fff"}} onClick={()=>setExam(e)}>{e}</div>
      )}
      <button disabled={!exam} onClick={()=>setScreen("subscription")}>Next</button>
    </div>
  );

  if(screen==="subscription")return(
    <div className="container">
      <h2>Subscription</h2>
      <div className="notice">
        ✅ Current Affairs<br/>
        ✅ Practice Questions<br/>
        ✅ Interview Practice<br/>
        ✅ Quick Book Summary<br/>
        ✅ MindMaps
      </div>
      <button onClick={()=>{alert("UPI Intent Open");setTimeout(()=>setScreen("manual"),60000);}}>Pay Now</button>
      <input id="code" placeholder="Enter Code (BIGHIT)"/>
      <button onClick={()=>{
        if(document.getElementById("code").value==="BIGHIT"){setSub(true);alert("Subscription Activated ✅"); setScreen("home");}else alert("Invalid code ❌");
      }}>Submit Code</button>
      <div className="notice">
        Dear user, if no payment response is received, our team will manually verify your payment and activate your plan within 12 hours. You will be contacted via your mobile number.
      </div>
    </div>
  );

  if(screen==="manual")return(
    <div className="container">
      <h2>Manual Verification Form</h2>
      <input placeholder="PAYER NAME"/>
      <input placeholder="UPI ID"/>
      <input placeholder="MOBILE NO"/>
      <button onClick={()=>alert("Submitted to Google Sheet API")}>Submit</button>
      <div className="notice">
        Our team will verify your payment manually and enable your subscription shortly.
      </div>
    </div>
  );

  if(screen==="home")return(
    <div className="container">
      <h2>Study Discussion Club</h2>
      {sections.map((s,i)=><div key={i} className="card" onClick={()=>{loadSection(s.url); setCurrentSection(s.name); setScreen("section");}}>{s.name}</div>)}
      <div className="card" onClick={()=>alert("Donation UPI Intent Open")}>Donation Bank</div>
    </div>
  );

  if(screen==="section")return(
    <div className="container">
      <div className="back-button" onClick={()=>setScreen("home")}>🔙</div>
      <h2>{currentSection}</h2>
      {sectionData.map((img,i)=><div key={i} className="card"><img src={img}/></div>)}
    </div>
  );

  return null;
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
